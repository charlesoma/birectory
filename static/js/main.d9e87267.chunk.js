(this.webpackJsonpbirectory=this.webpackJsonpbirectory||[]).push([[0],{33:function(e,t,n){e.exports=n(47)},38:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(22),o=n.n(c),i=(n(38),n(20)),s=n(18),l=n(2),u=n.n(l),p=n(3),m=n(11),d=n(12),h=n(15),g=n(13),f=n(16),E=n(14),y="LOGIN_REQUEST",v="LOGIN_FULFILLED",b="LOGIN_REJECTED",O="GET_DATA_REQUEST",S="GET_DATA_FULFILLED",w="GET_DATA_REJECTED",D="GET_CATEGORY_REQUEST",C="GET_CATEGORY_FULFILLED",j=y,k=v,N=b,x=O,A=S,T="SAVE_DATA_REQUEST",L="SAVE_DATA_FULFILLED",_="SAVE_DATA_REJECTED",U="SAVE_CATEGORY_REQUEST",I="SAVE_CATEGORY_FULFILLED",J="SAVE_CATEGORY_REJECTED",R=D,F=C,G="UPDATE_DATA_REQUEST",Q="UPDATE_DATA_FULFILLED",P="UPDATE_DATA_REJECTED",V="DELETE_DATA_REQUEST",M="DELETE_DATA_FULFILLED",Y=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(H()),"admin@email.com"===e.email&&"@Password123"===e.password?(localStorage.setItem("token","token"),n($())):n(q("error logging in"));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(z()),null===(n=localStorage.getItem("directories"))&&(n=[]),t(K(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(X()),e?(null===(r=JSON.parse(localStorage.getItem("directories")))&&(r=[]),a={name:e.name,description:e.description,phone:e.phone,email:e.email,website:e.website,imgUrl:e.imgUrl,categorySelected:e.categorySelected},r.push(a),localStorage.setItem("directories",JSON.stringify(r)),n(Z())):(console.log("error saving to directory"),n(ee()));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(){return{type:j}},$=function(e){return{type:k,payload:e}},q=function(e){return{type:N,payload:e}},z=function(){return{type:x}},K=function(e){return{type:A,payload:e}},X=function(){return{type:T}},Z=function(e){return{type:L,payload:e}},ee=function(){return{type:_}},te=function(){return{type:U}},ne=function(e){return{type:I,payload:e}},re=function(){return{type:J}},ae=function(){return{type:R}},ce=function(e){return{type:F,payload:e}},oe=function(){return{type:G}},ie=function(e){return{type:Q,payload:e}},se=function(){return{type:P}},le=function(){return{type:V}},ue=function(e){return{type:M,payload:e}},pe=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).logout=function(){localStorage.removeItem("token"),n.props.history.push({pathname:"/"})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{id:"header"},"token"===localStorage.getItem("token")&&a.a.createElement(i.b,{to:"/dashboard",style:{textDecoration:"none"}},a.a.createElement("div",null,a.a.createElement("p",null,"Dashboard"))),"token"===localStorage.getItem("token")?a.a.createElement("div",{onClick:this.logout},a.a.createElement("p",null,"Logout")):a.a.createElement(i.b,{to:"/login",style:{textDecoration:"none"}},a.a.createElement("div",null,a.a.createElement("p",null,"Login"))))}}]),t}(r.Component),me=Object(s.f)(pe),de=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",description:"",phone:"",email:"",website:"",directories:[]},n.searchHandler=function(e){var t=JSON.parse(n.props.directories).reverse().filter((function(t){return Object.values(t).some((function(t){return"string"===typeof t&&t.toLowerCase().includes(e.target.value)}))}));n.setState({directories:t})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getData();case 2:this.props.directories.length>0&&this.setState({directories:JSON.parse(this.props.directories).reverse()});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.directories;return a.a.createElement("div",{id:"home"},a.a.createElement(me,null),a.a.createElement("div",{className:"content"},localStorage.getItem("directories")&&a.a.createElement("div",{className:"searchDiv"},a.a.createElement("input",{type:"text",placeholder:"Search",className:"search",onChange:this.searchHandler})),e.map((function(e,t){return a.a.createElement("div",{key:t,className:"directoryList"},a.a.createElement("p",null,"Name: ",e.name),a.a.createElement("p",null,"Description: ",e.description),a.a.createElement("p",null,"Phone number: ",e.phone),a.a.createElement("p",null,"Email: ",e.email),a.a.createElement("p",null,"Website: ",e.website),a.a.createElement("div",{className:"catDiv"},"Categories: ",e.categorySelected&&e.categorySelected.map((function(e,t){return a.a.createElement("div",{key:t,className:"category"},e)}))),a.a.createElement("img",{alt:"",src:e.imgUrl?e.imgUrl:"https://via.placeholder.com/160",width:160,height:160}))})),e.length<1&&a.a.createElement("div",{className:"directoryList"},a.a.createElement("p",null,"Oops, nothing to show."))))}}]),t}(r.Component),he=Object(E.b)((function(e){return{directories:e.data.directories}}),(function(e){return{getData:function(){return e(W())},saveData:function(t){return e(B(t))}}}))(de),ge=n(19),fe=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={name:"",description:"",phone:"",email:"",website:"",category:"",edit:!1,index:"",imgUrl:"",categorySelected:[],directories:[],categories:[]},n.handleChange=function(e,t){n.setState(Object(ge.a)({},e,t.target.value))},n.handleCheck=function(e){var t,r=n.state.categorySelected;e.target.checked?r.push(e.target.value):(t=r.indexOf(e.target.value),r.splice(t,1)),n.setState({categorySelected:r})},n.updateDirectory=function(){var e=Object(p.a)(u.a.mark((function e(t){var r,a,c,o,i,s,l,p,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.state,a=r.name,c=r.description,o=r.phone,i=r.email,s=r.website,l=r.categorySelected,p=r.index,m=r.imgUrl,""!==a&&""!==c&&""!==o&&""!==i&&""!==s&&l!==[]){e.next=4;break}return e.abrupt("return");case 4:if(!n.state.edit){e.next=9;break}return e.next=7,n.props.updateData({name:a,description:c,phone:o,email:i,website:s,imgUrl:m,categorySelected:l},p);case 7:e.next=11;break;case 9:return e.next=11,n.props.saveData({name:a,description:c,phone:o,email:i,website:s,imgUrl:m,categorySelected:l});case 11:n.setState({edit:!1,name:"",description:"",phone:"",email:"",website:"",imgUrl:"",index:""}),n.componentDidMount();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createCategory=function(){var e=Object(p.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==(r=n.state.category)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.props.saveCategory({category:r});case 6:n.componentDidMount();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deleteDirectory=function(e){n.props.deleteData(e),n.componentDidMount()},n.editDirectory=function(e,t){n.setState({edit:!0,name:t.name,description:t.description,phone:t.phone,email:t.email,website:t.website,index:e})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getData();case 2:return e.next=4,this.props.getCategory();case 4:this.setState({directories:this.props.directories.length>0?JSON.parse(this.props.directories).reverse():[],categories:this.props.categories.length>0?JSON.parse(this.props.categories):[]});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.directories,r=t.categories,c=t.name,o=t.description,i=t.phone,l=t.email,u=t.website,p=t.edit,m=t.imgUrl;return"token"!==localStorage.getItem("token")?a.a.createElement(s.a,{to:"/login"}):a.a.createElement("div",{id:"home"},a.a.createElement(me,null),a.a.createElement("div",{className:"content"},a.a.createElement("div",{className:"forms"},a.a.createElement("form",{onSubmit:this.updateDirectory},a.a.createElement("input",{className:"input",placeholder:"Enter name",type:"text",value:c,onChange:function(t){return e.handleChange("name",t)}}),a.a.createElement("input",{className:"input",placeholder:"Enter description",type:"text",value:o,onChange:function(t){return e.handleChange("description",t)}}),a.a.createElement("input",{className:"input",placeholder:"Enter phone number",type:"text",value:i,onChange:function(t){return e.handleChange("phone",t)}}),a.a.createElement("input",{className:"input",placeholder:"Enter email",type:"text",value:l,onChange:function(t){return e.handleChange("email",t)}}),a.a.createElement("input",{className:"input",placeholder:"Enter website",type:"text",value:u,onChange:function(t){return e.handleChange("website",t)}}),a.a.createElement("input",{className:"input",placeholder:"Enter image url",type:"text",value:m,onChange:function(t){return e.handleChange("imgUrl",t)}}),a.a.createElement("div",{className:"categories"},r.map((function(t,n){return a.a.createElement("div",{key:n,className:"category"},a.a.createElement("p",null,t.category),a.a.createElement("input",{value:t.category,onChange:e.handleCheck,type:"checkbox"}))})),r.length<1&&a.a.createElement("p",{className:"empty"},"Create categories on the right")),a.a.createElement("input",{className:"input",type:"submit",value:p?"Edit listing":"Create listing"})),a.a.createElement("form",{onSubmit:this.createCategory},a.a.createElement("input",{className:"input",placeholder:"Enter category",type:"text",onChange:function(t){return e.handleChange("category",t)}}),a.a.createElement("input",{className:"input",type:"submit",value:"Create category"}))),n.map((function(t,n){return a.a.createElement("div",{key:n,className:"directoryList"},a.a.createElement("div",{className:"delete",onClick:function(){return e.deleteDirectory(n)}},"\xd7"),a.a.createElement("div",{className:"edit",onClick:function(){return e.editDirectory(n,t)}},"Edit"),a.a.createElement("p",null,"Name: ",t.name),a.a.createElement("p",null,"Description: ",t.description),a.a.createElement("p",null,"Phone number: ",t.phone),a.a.createElement("p",null,"Email: ",t.email),a.a.createElement("p",null,"Website: ",t.website),a.a.createElement("div",{className:"catDiv"},"Categories: ",t.categorySelected&&t.categorySelected.map((function(e,t){return a.a.createElement("div",{key:t,className:"category"},e)}))),a.a.createElement("img",{alt:"",src:t.imgUrl?t.imgUrl:"https://via.placeholder.com/160",width:160,height:160}))}))))}}]),t}(r.Component),Ee=Object(E.b)((function(e){return{directories:e.data.directories,categories:e.data.categories}}),(function(e){return{login:function(t){return e(Y(t))},getData:function(){return e(W())},saveData:function(t){return e(B(t))},saveCategory:function(t){return e(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(te()),e?(null===(r=JSON.parse(localStorage.getItem("categories")))&&(r=[]),a={category:e.category},r.push(a),localStorage.setItem("categories",JSON.stringify(r)),n(ne())):(console.log("error saving to directory"),n(re()));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},getCategory:function(){return e(function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(ae()),null===(n=localStorage.getItem("categories"))&&(n=[]),t(ce(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteData:function(t){return e(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(le()),(r=JSON.parse(localStorage.getItem("directories"))).reverse().splice(e,1),localStorage.setItem("directories",JSON.stringify(r.reverse())),n(ue());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},updateData:function(t,n){return e(function(e,t){return function(){var n=Object(p.a)(u.a.mark((function n(r){var a,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(oe()),e?(null===(a=JSON.parse(localStorage.getItem("directories")))&&(a=[]),c={name:e.name,description:e.description,phone:e.phone,email:e.email,website:e.website,imgUrl:e.imgUrl,categorySelected:e.categorySelected},a.reverse()[t]=c,localStorage.setItem("directories",JSON.stringify(a.reverse())),r(ie())):(console.log("error updating directory"),r(se()));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(fe),ye=function(e){function t(){var e,n;Object(m.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={email:"",password:"",error:""},n.handleChange=function(e,t){var r;n.setState((r={},Object(ge.a)(r,e,t.target.value),Object(ge.a)(r,"error",""),r))},n.handleLogin=function(){var e=Object(p.a)(u.a.mark((function e(t){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.state,a=r.email,c=r.password,""!==a&&""!==c){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.props.login({email:a,password:c});case 6:"token"===localStorage.getItem("token")&&n.props.history.push({pathname:"/"}),n.props.error&&n.setState({error:n.props.error});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{id:"login"},a.a.createElement(me,null),a.a.createElement("div",{className:"content"},a.a.createElement("form",{onSubmit:this.handleLogin},a.a.createElement("p",null,this.state.error),a.a.createElement("input",{className:"input",placeholder:"Enter email",type:"text",onChange:function(t){return e.handleChange("email",t)}}),a.a.createElement("input",{className:"input",placeholder:"Enter password",type:"password",onChange:function(t){return e.handleChange("password",t)}}),a.a.createElement("input",{className:"input",type:"submit",value:"Login"}))))}}]),t}(r.Component),ve=Object(E.b)((function(e){return{error:e.data.error}}),(function(e){return{login:function(t){return e(Y(t))}}}))(ye),be=(n(45),n(17)),Oe=(n(46),n(32)),Se=n(10),we=y,De=v,Ce=b,je=O,ke=S,Ne=w,xe=D,Ae=C,Te={directories:[],categories:[],error:""},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(Se.a)({},e,{error:!1});case De:return Object(Se.a)({},e);case Ce:return Object(Se.a)({},e,{error:t.payload});case je:return Object(Se.a)({},e);case ke:return Object(Se.a)({},e,{directories:t.payload});case Ne:case xe:return Object(Se.a)({},e);case Ae:return Object(Se.a)({},e,{categories:t.payload});default:return e}},_e=Object(be.c)({data:Le}),Ue=function(){var e=[Oe.a];return Object(be.e)(_e,Object(be.d)(be.a.apply(void 0,e)))}();var Ie=function(){return a.a.createElement(E.a,{store:Ue},a.a.createElement("div",null,a.a.createElement(i.a,null,a.a.createElement(s.b,{exact:!0,path:"/",component:he}),a.a.createElement(s.b,{path:"/dashboard",component:Ee}),a.a.createElement(s.b,{path:"/login",component:ve}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.d9e87267.chunk.js.map